C51 COMPILER V9.60.7.0   COMMON                                                            06/27/2025 11:39:29 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE COMMON
OBJECT MODULE PLACED IN ..\Output\common.obj
COMPILER INVOKED BY: D:\APP\Keil_v5\C51\BIN\C51.EXE ..\Emembed\Src\common.c LARGE OPTIMIZE(8,SPEED) BROWSE INCDIR(..\BSP
                    -\Inc;..\Core\Inc;..\Driver;..\Emembed\Inc;..\SYSTEM\Inc) DEBUG OBJECTEXTEND PRINT(.\Listings\common.lst) OBJECT(..\Outpu
                    -t\common.obj)

line level    source

   1          #include "common.h"
   2          
   3          /**
   4           * @brief       一些定时执行的事件   Timer3：10ms
   5           *
   6           * @param   
   7           *
   8           * @return  void
   9          **/
  10          void Tim3_ISR( void ) interrupt 19
  11          {
  12   1      
  13   1          static uint16_t temp_scan_cnt = 0;
  14   1          static uint16_t level1_cnt = 0;
  15   1          static uint16_t level2_cnt = 0;
  16   1          static uint16_t level3_cnt = 0;
  17   1          static uint16_t level4_cnt = 0;
  18   1          static uint16_t level5_cnt = 0;
  19   1          static uint16_t level6_cnt = 0;
  20   1          static uint16_t level7_cnt = 0;
  21   1          static uint16_t level8_cnt = 0;
  22   1          static uint16_t level9_cnt = 0;
  23   1          static uint16_t level10_cnt = 0;
  24   1          static uint16_t level11_cnt = 0;
  25   1          static uint16_t level12_cnt = 0;
  26   1          static uint16_t level13_cnt = 0;
  27   1          static uint16_t level14_cnt = 0;
  28   1          static uint16_t cir_delay_cnt  = 0;
  29   1          static uint16_t stir_delay_cnt = 0;
  30   1          /* 1, temp 上报 1s/次                             */
  31   1          if( dht11.temp_scan_flag == 0 )
  32   1          {
  33   2              temp_scan_cnt++;
  34   2              if( temp_scan_cnt == 100 )
  35   2              {
  36   3                  dht11.temp_scan_flag = 1;
  37   3                  temp_scan_cnt = 0;
  38   3              }
  39   2          }
  40   1          /* 2, LEVEL Scan                            */
  41   1          /* 2.1, LEVEL   1                          */
  42   1          if( level1_H == 0 )
  43   1          {
  44   2              level1_cnt++;
  45   2              if( level1_cnt >= level.level_delay )
  46   2              {
  47   3                  level1_cnt = 0;
  48   3                  level.level1_down_flag = 1;
  49   3              }
  50   2          }else
  51   1          {
  52   2              level1_cnt = 0;
  53   2              level.level1_down_flag = 0;
C51 COMPILER V9.60.7.0   COMMON                                                            06/27/2025 11:39:29 PAGE 2   

  54   2          }
  55   1      
  56   1          /* 2.2, LEVEL   2                          */
  57   1          if( level2_H == 0 )
  58   1          {
  59   2              level2_cnt++;
  60   2              if( level2_cnt >= level.level_delay )
  61   2              {
  62   3                  level2_cnt = 0;
  63   3                  level.level2_down_flag = 1;
  64   3              }
  65   2          }else
  66   1          {
  67   2              level2_cnt = 0;
  68   2              level.level2_down_flag = 0;
  69   2          }
  70   1      
  71   1          /* 2.3, LEVEL   3                          */
  72   1          if( level3_H == 0 )
  73   1          {
  74   2              level3_cnt++;
  75   2              if( level3_cnt >= level.level_delay )
  76   2              {
  77   3                  level3_cnt = 0;
  78   3                  level.level3_down_flag = 1;
  79   3              }
  80   2          }else
  81   1          {
  82   2              level3_cnt = 0;
  83   2              level.level3_down_flag = 0;
  84   2          }
  85   1      
  86   1          /* 2.4, LEVEL   4                          */
  87   1          if( level4_H == 0 )
  88   1          {
  89   2              level4_cnt++;
  90   2              if( level4_cnt >= level.level_delay )
  91   2              {
  92   3                  level4_cnt = 0;
  93   3                  level.level4_down_flag = 1;
  94   3              }
  95   2          }else
  96   1          {
  97   2              level4_cnt = 0;
  98   2              level.level4_down_flag = 0;
  99   2          }
 100   1      
 101   1          /* 2.5, LEVEL   5                          */
 102   1          if( level5_H == 0 )
 103   1          {
 104   2              level5_cnt++;
 105   2              if( level5_cnt >= level.level_delay )
 106   2              {
 107   3                  level5_cnt = 0;
 108   3                  level.level5_down_flag = 1;
 109   3              }
 110   2          }else
 111   1          {
 112   2              level5_cnt = 0;
 113   2              level.level5_down_flag = 0;
 114   2          }
 115   1      
C51 COMPILER V9.60.7.0   COMMON                                                            06/27/2025 11:39:29 PAGE 3   

 116   1          /* 2.6, LEVEL   6                          */
 117   1          if( level6_H == 0 )
 118   1          {
 119   2              level6_cnt++;
 120   2              if( level6_cnt >= level.level_delay )
 121   2              {
 122   3                  level6_cnt = 0;
 123   3                  level.level6_down_flag = 1;
 124   3              }
 125   2          }else
 126   1          {
 127   2              level6_cnt = 0;
 128   2              level.level6_down_flag = 0;
 129   2          }
 130   1      
 131   1          /* 2.7, LEVEL   7                          */
 132   1          if( level7_H == 0 )
 133   1          {
 134   2              level7_cnt++;
 135   2              if( level7_cnt >= level.level_delay )
 136   2              {
 137   3                  level7_cnt = 0;
 138   3                  level.level7_down_flag = 1;
 139   3              }
 140   2          }else
 141   1          {
 142   2              level7_cnt = 0;
 143   2              level.level7_down_flag = 0;
 144   2          }
 145   1      
 146   1          /* 2.8, LEVEL   8                          */
 147   1          if( level8_H == 0 )
 148   1          {
 149   2              level8_cnt++;
 150   2              if( level8_cnt >= level.level_delay )
 151   2              {
 152   3                  level8_cnt = 0;
 153   3                  level.level8_down_flag = 1;
 154   3              }
 155   2          }else
 156   1          {
 157   2              level8_cnt = 0;
 158   2              level.level8_down_flag = 0;
 159   2          }
 160   1      
 161   1          /* 2.9, LEVEL   9                          */
 162   1          if( level9_H == 0 )
 163   1          {
 164   2              level9_cnt++;
 165   2              if( level9_cnt >= level.level_delay )
 166   2              {
 167   3                  level9_cnt = 0;
 168   3                  level.level9_down_flag = 1;
 169   3              }
 170   2          }else
 171   1          {
 172   2              level9_cnt = 0;
 173   2              level.level9_down_flag = 0;
 174   2          }
 175   1      
 176   1          /* 2.10, LEVEL   10                          */
 177   1          if( level10_H == 0 )
C51 COMPILER V9.60.7.0   COMMON                                                            06/27/2025 11:39:29 PAGE 4   

 178   1          {
 179   2              level10_cnt++;
 180   2              if( level10_cnt >= level.level_delay )
 181   2              {
 182   3                  level10_cnt = 0;
 183   3                  level.level10_down_flag = 1;
 184   3              }
 185   2          }else
 186   1          {
 187   2              level10_cnt = 0;
 188   2              level.level10_down_flag = 0;
 189   2          }
 190   1      
 191   1          /* 2.11, LEVEL   11                          */
 192   1          if( level11_H == 0 )
 193   1          {
 194   2              level11_cnt++;
 195   2              if( level11_cnt >= level.level_delay )
 196   2              {
 197   3                  level11_cnt = 0;
 198   3                  level.level11_down_flag = 1;
 199   3              }
 200   2          }else
 201   1          {
 202   2              level11_cnt = 0;
 203   2              level.level11_down_flag = 0;
 204   2          }
 205   1      
 206   1          /* 2.12, LEVEL   12                          */
 207   1          if( level12_H == 0 )
 208   1          {
 209   2              level12_cnt++;
 210   2              if( level12_cnt >= level.level_delay )
 211   2              {
 212   3                  level12_cnt = 0;
 213   3                  level.level12_down_flag = 1;
 214   3              }
 215   2          }else
 216   1          {
 217   2              level12_cnt = 0;
 218   2              level.level12_down_flag = 0;
 219   2          }
 220   1      
 221   1          /* 2.13, LEVEL   13                          */
 222   1          if( level13_H == 0 )
 223   1          {
 224   2              level13_cnt++;
 225   2              if( level13_cnt >= level.level_delay )
 226   2              {
 227   3                  level13_cnt = 0;
 228   3                  level.level13_down_flag = 1;
 229   3              }
 230   2          }else
 231   1          {
 232   2              level13_cnt = 0;
 233   2              level.level13_down_flag = 0;
 234   2          }
 235   1      
 236   1          /* 2.14, LEVEL   14                          */
 237   1          if( level14_H == 0 )
 238   1          {
 239   2              level14_cnt++;
C51 COMPILER V9.60.7.0   COMMON                                                            06/27/2025 11:39:29 PAGE 5   

 240   2              if( level14_cnt >= level.level_delay )
 241   2              {
 242   3                  level14_cnt = 0;
 243   3                  level.level14_down_flag = 1;
 244   3              }
 245   2          }else
 246   1          {
 247   2              level14_cnt = 0;
 248   2              level.level14_down_flag = 0;
 249   2          }
 250   1      
 251   1          /* 3. 循环和搅拌电机延时 */
 252   1          if( dc_ctrl.cir_switch == 1 )
 253   1          {
 254   2              cir_delay_cnt++;
 255   2              if( cir_delay_cnt <= dc_ctrl.cir_start_time )
 256   2              {
 257   3                  pwm_ctrl(CIR_CTRL,dc_ctrl.cir_level);
 258   3              }
 259   2              if((cir_delay_cnt < (dc_ctrl.cir_start_time + dc_ctrl.cir_stop_time)) && ( cir_delay_cnt > dc_ctrl
             -.cir_start_time ))
 260   2              {
 261   3                  pwm_ctrl(CIR_CTRL,0);
 262   3              }
 263   2              if(cir_delay_cnt >= (dc_ctrl.cir_start_time + dc_ctrl.cir_stop_time))
 264   2              {
 265   3                  cir_delay_cnt = 0;
 266   3              }
 267   2          }
 268   1          
 269   1          if( dc_ctrl.stir_switch == 1 )
 270   1          {
 271   2              stir_delay_cnt++;
 272   2              if( stir_delay_cnt <= dc_ctrl.stir_start_time )
 273   2              {
 274   3                  pwm_ctrl(STIR_CTRL,dc_ctrl.stir_level);
 275   3              }
 276   2              if((stir_delay_cnt < (dc_ctrl.stir_start_time + dc_ctrl.stir_stop_time)) && ( stir_delay_cnt > dc_
             -ctrl.stir_start_time ))
 277   2              {
 278   3                  pwm_ctrl(STIR_CTRL,0);
 279   3              }
 280   2              if(stir_delay_cnt >= (dc_ctrl.stir_start_time + dc_ctrl.stir_stop_time))
 281   2              {
 282   3                  stir_delay_cnt = 0;
 283   3              }
 284   2          }  
 285   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1222    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     34    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
